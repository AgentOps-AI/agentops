---
title: Google Generative AI (Gemini)
description: "Monitor and analyze your Google Gemini API calls with AgentOps"
---

import CodeTooltip from '/snippets/add-code-tooltip.mdx'
import EnvTooltip from '/snippets/add-env-tooltip.mdx'

AgentOps provides seamless integration with [Google's Generative AI API](https://ai.google.dev/), allowing you to monitor and analyze all your Gemini model interactions automatically.

## Installation

<CodeGroup>
  ```bash pip
  pip install agentops google-genai
  ```
  ```bash poetry
  poetry add agentops google-genai
  ```
  ```bash uv
  uv add agentops google-genai
  ```
</CodeGroup>

## Setting Up API Keys

Before using Google Gemini with AgentOps, you need to set up your API keys. You can obtain:
- **GOOGLE_API_KEY**: From the [Google AI Studio](https://aistudio.google.com/app/apikey)
- **AGENTOPS_API_KEY**: From your [AgentOps Dashboard](https://app.agentops.ai/)

Then to set them up, you can either export them as environment variables or set them in a `.env` file.

<CodeGroup>
    ```bash Export to CLI
    export GOOGLE_API_KEY="your_google_api_key_here"
    export AGENTOPS_API_KEY="your_agentops_api_key_here"
    ```
    ```txt Set in .env file
    GOOGLE_API_KEY="your_google_api_key_here"
    AGENTOPS_API_KEY="your_agentops_api_key_here"
    ```
</CodeGroup>

Then load the environment variables in your Python code:

```python
from dotenv import load_dotenv
import os

# Load environment variables from .env file
load_dotenv()

# Set up environment variables with fallback values
os.environ["GOOGLE_API_KEY"] = os.getenv("GOOGLE_API_KEY")
os.environ["AGENTOPS_API_KEY"] = os.getenv("AGENTOPS_API_KEY")
```

## Usage

Initialize AgentOps at the beginning of your application to automatically track all Gemini API calls:

<CodeGroup>
```python Python
import agentops
from google import genai

# Initialize AgentOps
agentops.init(<INSERT YOUR API KEY HERE>)

# Create a client for Gemini Developer API
client = genai.Client(api_key="YOUR_GEMINI_API_KEY")

# Generate content with a model
response = client.models.generate_content(
    model='gemini-2.0-flash-001',
    contents='What is AI observability?'
)

print(response.text)

# All Gemini API calls are automatically tracked by AgentOps
```
</CodeGroup>

## Environment Variables

<EnvTooltip />
<CodeGroup>
  ```python .env
  AGENTOPS_API_KEY=<YOUR_AGENTOPS_API_KEY>
  GOOGLE_API_KEY=<YOUR_GOOGLE_API_KEY>
  
  # For Vertex AI
  # GOOGLE_GENAI_USE_VERTEXAI=true
  # GOOGLE_CLOUD_PROJECT=your-project-id
  # GOOGLE_CLOUD_LOCATION=us-central1
  ```
</CodeGroup>

Read more about environment variables in [Advanced Configuration](/v2/usage/advanced-configuration)

## Alternative Client Setup

You can also set up the client using Vertex AI or with environment variables:

<CodeGroup>

```python Vertex AI
import agentops
from google import genai

# Initialize AgentOps
agentops.init(<INSERT YOUR API KEY HERE>)

# Using Vertex AI
client = genai.Client(
    vertexai=True,
    project='your-project-id',
    location='us-central1'
)

# Generate content
response = client.models.generate_content(
    model='gemini-2.0-flash-001',
    contents='What is AI observability?'
)

print(response.text)
```

```python Using Environment Variables
import agentops
from google import genai

# Initialize AgentOps
agentops.init(<INSERT YOUR API KEY HERE>)

# Set GOOGLE_API_KEY environment variable before running
# export GOOGLE_API_KEY='your-api-key'
client = genai.Client()

# Generate content
response = client.models.generate_content(
    model='gemini-2.0-flash-001',
    contents='What is AI observability?'
)

print(response.text)
```
</CodeGroup>

## System Instructions and Settings

You can customize the model behavior with system instructions and other settings:

<CodeGroup>
```python With System Instructions
import agentops
from google import genai
from google.genai import types

# Initialize AgentOps
agentops.init(<INSERT YOUR API KEY HERE>)

# Create a client
client = genai.Client(api_key="YOUR_GEMINI_API_KEY")

# Generate content with system instructions
response = client.models.generate_content(
    model='gemini-2.0-flash-001',
    contents='Write a short poem',
    config=types.GenerateContentConfig(
        system_instruction='You are a professional poet who specializes in sonnets',
        max_output_tokens=200,
        temperature=0.7,
    ),
)

print(response.text)
```
</CodeGroup>

## Streaming Example

AgentOps also supports tracking streaming requests with Gemini:

<CodeGroup>
```python Streaming
import agentops
from google import genai

# Initialize AgentOps
agentops.init(<INSERT YOUR API KEY HERE>)

# Create a client
client = genai.Client(api_key="YOUR_GEMINI_API_KEY")

# Generate streaming content
for chunk in client.models.generate_content_stream(
    model='gemini-2.0-flash-001',
    contents='Explain quantum computing in simple terms.',
):
    print(chunk.text, end="", flush=True)

# All streaming requests are automatically tracked by AgentOps
```
</CodeGroup>

## Chat Example

<CodeGroup>
```python Chat
import agentops
from google import genai

# Initialize AgentOps
agentops.init(<INSERT YOUR API KEY HERE>)

# Create a client
client = genai.Client(api_key="YOUR_GEMINI_API_KEY")

# Start a chat session
chat = client.chats.create(model='gemini-2.0-flash-001')

# Send messages and get responses
response = chat.send_message('Hello, how can you help me with AI development?')
print(response.text)

# Continue the conversation
response = chat.send_message('What are the best practices for prompt engineering?')
print(response.text)

# All chat interactions are automatically tracked by AgentOps
```
</CodeGroup>

## Examples

Examples are available in the [AgentOps repository](https://github.com/AgentOps-AI/agentops/tree/main/examples/gemini).

## Additional Resources

For more information on using the Google Gen AI SDK, refer to the [official documentation](https://googleapis.github.io/python-genai/).

<script type="module" src="/scripts/github_stars.js"></script>
<script type="module" src="/scripts/scroll-img-fadein-animation.js"></script>
<script type="module" src="/scripts/button_heartbeat_animation.js"></script>
<script type="css" src="/styles/styles.css"></script>
